model Package {
  id                Int             @id @default(autoincrement())
  trackingCode      String?
  type              PackageType
  trackingNumber    String?
  courier           String?
  senderName        String?
  senderCompany     String?
  recipientId       Int?            // ID del residente destinatario (si est√° registrado)
  resident          Resident?       @relation(fields: [recipientId], references: [id])
  propertyId        Int             // ID de la unidad de destino
  property          Property        @relation(fields: [propertyId], references: [id])
  complexId         Int
  complex           ResidentialComplex @relation(fields: [complexId], references: [id])
  receivedAt        DateTime
  notifiedAt        DateTime?
  deliveredAt       DateTime?
  expirationDate    DateTime?
  status            PackageStatus   @default(RECEIVED)
  priority          PackagePriority @default(NORMAL)
  receivedByStaffId Int
  receivedByStaff   User            @relation("ReceivedPackages", fields: [receivedByStaffId], references: [id])
  deliveredByStaffId Int?
  deliveredByStaff  User?           @relation("DeliveredPackages", fields: [deliveredByStaffId], references: [id])
  receivedByResidentId Int?
  receivedByResident User?           @relation("ResidentReceivedPackages", fields: [receivedByResidentId], references: [id])
  size              String?
  weight            Float?
  isFragile         Boolean         @default(false)
  needsRefrigeration Boolean        @default(false)
  description       String?
  notes             String?
  tags              String[]
  mainPhotoUrl      String?
  attachments       Json?
  signatureUrl      String?
  createdAt         DateTime        @default(now())
  updatedAt         DateTime        @updatedAt
  statusHistory     PackageStatusHistory[]
  notifications     PackageNotification[]
  registeredBy      User            @relation("RegisteredPackages", fields: [registeredBy], references: [id])
  registeredById    Int
  
  @@index([status])
  @@index([receivedAt])
  @@index([propertyId])
  @@index([recipientId])
  @@index([trackingCode])
  @@index([trackingNumber])
  @@index([complexId])
  
  
}
