'use client';
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useState, useEffect } from 'react';
import { useAuthStore } from '@/store/authStore';
import AdminHeader from '@/components/admin/layout/AdminHeader';
import AdminSidebar from '@/components/admin/layout/AdminSidebar';
import { Loader2, Building2, Users, Car, PawPrint, Plus, Home, Settings } from 'lucide-react';
import { getDashboardStats } from '@/services/dashboardService';
import Link from 'next/link';
export default function InventoryPage() {
    var _a, _b, _c, _d;
    const { user, loading: authLoading, logout } = useAuthStore();
    const [sidebarCollapsed, setSidebarCollapsed] = useState(false);
    const [stats, setStats] = useState(null);
    const [loadingStats, setLoadingStats] = useState(true);
    useEffect(() => {
        const fetchStats = () => __awaiter(this, void 0, void 0, function* () {
            try {
                const fetchedStats = yield getDashboardStats();
                setStats(fetchedStats);
            }
            catch (error) {
                console.error('Error fetching inventory stats:', error);
            }
            finally {
                setLoadingStats(false);
            }
        });
        fetchStats();
    }, []);
    if (authLoading || loadingStats) {
        return (_jsx("div", { className: "min-h-screen flex items-center justify-center", children: _jsx(Loader2, { className: "h-8 w-8 animate-spin" }) }));
    }
    if (!user || (user.role !== 'ADMIN' && user.role !== 'COMPLEX_ADMIN')) {
        return (_jsx("div", { className: "min-h-screen flex items-center justify-center", children: _jsxs("div", { className: "text-center", children: [_jsx("h1", { className: "text-2xl font-bold text-gray-900 mb-2", children: "Acceso Denegado" }), _jsx("p", { className: "text-gray-600", children: "No tienes permisos para acceder a esta p\u00E1gina." })] }) }));
    }
    return (_jsxs("div", { className: "min-h-screen bg-gray-50", children: [_jsx(AdminHeader, { adminName: (user === null || user === void 0 ? void 0 : user.name) || "Administrador", complexName: "Conjunto Residencial Armon\u00EDa", onLogout: logout }), _jsxs("div", { className: "flex", children: [_jsx(AdminSidebar, { collapsed: sidebarCollapsed, onToggle: () => setSidebarCollapsed(!sidebarCollapsed) }), _jsx("main", { className: `flex-1 transition-all duration-300 ${sidebarCollapsed ? 'ml-16' : 'ml-64'} mt-16 p-6`, children: _jsxs("div", { className: "max-w-7xl mx-auto", children: [_jsxs("div", { className: "mb-6", children: [_jsx("h1", { className: "text-3xl font-bold text-gray-900", children: "Gesti\u00F3n de Inventario" }), _jsx("p", { className: "text-gray-600 mt-2", children: "Administra propiedades, residentes, veh\u00EDculos y mascotas" })] }), _jsxs("div", { className: "grid grid-cols-1 md:grid-cols-4 gap-6 mb-8", children: [_jsx("div", { className: "bg-white rounded-lg shadow p-6", children: _jsxs("div", { className: "flex items-center", children: [_jsx(Building2, { className: "h-8 w-8 text-blue-600" }), _jsxs("div", { className: "ml-4", children: [_jsx("p", { className: "text-sm font-medium text-gray-600", children: "Propiedades" }), _jsx("p", { className: "text-2xl font-bold text-gray-900", children: (_a = stats === null || stats === void 0 ? void 0 : stats.totalProperties) !== null && _a !== void 0 ? _a : 0 })] })] }) }), _jsx("div", { className: "bg-white rounded-lg shadow p-6", children: _jsxs("div", { className: "flex items-center", children: [_jsx(Users, { className: "h-8 w-8 text-green-600" }), _jsxs("div", { className: "ml-4", children: [_jsx("p", { className: "text-sm font-medium text-gray-600", children: "Residentes" }), _jsx("p", { className: "text-2xl font-bold text-gray-900", children: (_b = stats === null || stats === void 0 ? void 0 : stats.totalResidents) !== null && _b !== void 0 ? _b : 0 })] })] }) }), _jsx("div", { className: "bg-white rounded-lg shadow p-6", children: _jsxs("div", { className: "flex items-center", children: [_jsx(Car, { className: "h-8 w-8 text-purple-600" }), _jsxs("div", { className: "ml-4", children: [_jsx("p", { className: "text-sm font-medium text-gray-600", children: "Veh\u00EDculos" }), _jsx("p", { className: "text-2xl font-bold text-gray-900", children: (_c = stats === null || stats === void 0 ? void 0 : stats.totalVehicles) !== null && _c !== void 0 ? _c : 0 })] })] }) }), _jsx("div", { className: "bg-white rounded-lg shadow p-6", children: _jsxs("div", { className: "flex items-center", children: [_jsx(PawPrint, { className: "h-8 w-8 text-orange-600" }), _jsxs("div", { className: "ml-4", children: [_jsx("p", { className: "text-sm font-medium text-gray-600", children: "Mascotas" }), _jsx("p", { className: "text-2xl font-bold text-gray-900", children: (_d = stats === null || stats === void 0 ? void 0 : stats.totalPets) !== null && _d !== void 0 ? _d : 0 })] })] }) })] }), _jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6", children: [_jsxs(Link, { href: "/admin/inventory/properties", className: "bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow cursor-pointer", children: [_jsxs("div", { className: "flex items-center justify-between mb-4", children: [_jsx(Building2, { className: "h-8 w-8 text-blue-600" }), _jsx(Plus, { className: "h-5 w-5 text-gray-400" })] }), _jsx("h3", { className: "text-lg font-semibold text-gray-900 mb-2", children: "Propiedades" }), _jsx("p", { className: "text-gray-600 text-sm", children: "Gestionar apartamentos, casas y locales comerciales" })] }), _jsxs(Link, { href: "/admin/inventory/residents", className: "bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow cursor-pointer", children: [_jsxs("div", { className: "flex items-center justify-between mb-4", children: [_jsx(Users, { className: "h-8 w-8 text-green-600" }), _jsx(Plus, { className: "h-5 w-5 text-gray-400" })] }), _jsx("h3", { className: "text-lg font-semibold text-gray-900 mb-2", children: "Residentes" }), _jsx("p", { className: "text-gray-600 text-sm", children: "Administrar informaci\u00F3n de propietarios e inquilinos" })] }), _jsxs(Link, { href: "/admin/inventory/vehicles", className: "bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow cursor-pointer", children: [_jsxs("div", { className: "flex items-center justify-between mb-4", children: [_jsx(Car, { className: "h-8 w-8 text-purple-600" }), _jsx(Plus, { className: "h-5 w-5 text-gray-400" })] }), _jsx("h3", { className: "text-lg font-semibold text-gray-900 mb-2", children: "Veh\u00EDculos" }), _jsx("p", { className: "text-gray-600 text-sm", children: "Registro y control de veh\u00EDculos autorizados" })] }), _jsxs(Link, { href: "/admin/inventory/pets", className: "bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow cursor-pointer", children: [_jsxs("div", { className: "flex items-center justify-between mb-4", children: [_jsx(PawPrint, { className: "h-8 w-8 text-orange-600" }), _jsx(Plus, { className: "h-5 w-5 text-gray-400" })] }), _jsx("h3", { className: "text-lg font-semibold text-gray-900 mb-2", children: "Mascotas" }), _jsx("p", { className: "text-gray-600 text-sm", children: "Control de mascotas registradas en el conjunto" })] }), _jsxs(Link, { href: "/admin/inventory/amenities", className: "bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow cursor-pointer", children: [_jsxs("div", { className: "flex items-center justify-between mb-4", children: [_jsx(Home, { className: "h-8 w-8 text-red-600" }), _jsx(Plus, { className: "h-5 w-5 text-gray-400" })] }), _jsx("h3", { className: "text-lg font-semibold text-gray-900 mb-2", children: "Amenidades" }), _jsx("p", { className: "text-gray-600 text-sm", children: "Gestionar \u00E1reas comunes y servicios recreativos" })] }), _jsxs(Link, { href: "/admin/inventory/common-assets", className: "bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow cursor-pointer", children: [_jsxs("div", { className: "flex items-center justify-between mb-4", children: [_jsx(Building2, { className: "h-8 w-8 text-teal-600" }), _jsx(Plus, { className: "h-5 w-5 text-gray-400" })] }), _jsx("h3", { className: "text-lg font-semibold text-gray-900 mb-2", children: "Bienes Comunes" }), _jsx("p", { className: "text-gray-600 text-sm", children: "Inventario de activos y propiedades del conjunto" })] }), _jsxs(Link, { href: "/admin/inventory/complex-setup", className: "bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow cursor-pointer", children: [_jsxs("div", { className: "flex items-center justify-between mb-4", children: [_jsx(Settings, { className: "h-8 w-8 text-gray-600" }), _jsx(Plus, { className: "h-5 w-5 text-gray-400" })] }), _jsx("h3", { className: "text-lg font-semibold text-gray-900 mb-2", children: "Configuraci\u00F3n del Conjunto" }), _jsx("p", { className: "text-gray-600 text-sm", children: "Configurar detalles generales del conjunto residencial" })] })] })] }) })] })] }));
}
