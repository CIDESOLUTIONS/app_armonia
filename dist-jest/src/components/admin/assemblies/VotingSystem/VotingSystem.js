import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useState } from 'react';
import { PieChart, CheckCircle2, XCircle, HelpCircle } from 'lucide-react';
import Button from '@/components/common/Button';
const VotingSystem = ({ topic, onStartVoting, onEndVoting, onVote }) => {
    const [selectedVote, setSelectedVote] = useState(null);
    // Calcular resultados
    const totalVotes = topic.votos.length;
    const results = {
        favor: topic.votos.filter(v => v.value === 'favor').length,
        contra: topic.votos.filter(v => v.value === 'contra').length,
        abstencion: topic.votos.filter(v => v.value === 'abstencion').length
    };
    return (_jsxs("div", { className: "space-y-6", children: [_jsxs("div", { className: "bg-white rounded-lg border border-gray-200 p-6", children: [_jsx("h3", { className: "text-lg font-semibold text-gray-900 mb-2", children: topic.titulo }), _jsx("p", { className: "text-gray-600 mb-4", children: topic.descripcion }), _jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { className: "flex items-center space-x-2", children: [_jsx("span", { className: "text-sm font-medium text-gray-700", children: "Estado:" }), _jsx("span", { className: `
              inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium
              ${topic.estado === 'en_curso' ? 'bg-blue-100 text-blue-800' :
                                            topic.estado === 'finalizado' ? 'bg-green-100 text-green-800' :
                                                'bg-gray-100 text-gray-800'}
            `, children: topic.estado === 'en_curso' ? 'Votación en Curso' :
                                            topic.estado === 'finalizado' ? 'Votación Finalizada' :
                                                'Pendiente' })] }), topic.estado === 'pendiente' && (_jsx(Button, { onClick: onStartVoting, children: "Iniciar Votaci\u00F3n" })), topic.estado === 'en_curso' && (_jsx(Button, { variant: "danger", onClick: onEndVoting, children: "Finalizar Votaci\u00F3n" }))] })] }), topic.estado === 'en_curso' && (_jsxs("div", { className: "bg-white rounded-lg border border-gray-200 p-6", children: [_jsx("h4", { className: "text-sm font-medium text-gray-900 mb-4", children: "Emitir Voto" }), _jsxs("div", { className: "flex space-x-4", children: [_jsx(Button, { variant: selectedVote === 'favor' ? 'primary' : 'outline', onClick: () => setSelectedVote('favor'), icon: _jsx(CheckCircle2, {}), children: "A Favor" }), _jsx(Button, { variant: selectedVote === 'contra' ? 'primary' : 'outline', onClick: () => setSelectedVote('contra'), icon: _jsx(XCircle, {}), children: "En Contra" }), _jsx(Button, { variant: selectedVote === 'abstencion' ? 'primary' : 'outline', onClick: () => setSelectedVote('abstencion'), icon: _jsx(HelpCircle, {}), children: "Abstenci\u00F3n" })] })] })), (topic.estado === 'en_curso' || topic.estado === 'finalizado') && (_jsxs("div", { className: "bg-white rounded-lg border border-gray-200 p-6", children: [_jsxs("div", { className: "flex items-center justify-between mb-4", children: [_jsx("h4", { className: "text-sm font-medium text-gray-900", children: "Resultados Parciales" }), _jsxs("div", { className: "flex items-center text-sm text-gray-500", children: [_jsx(PieChart, { className: "w-4 h-4 mr-1" }), "Total Votos: ", totalVotes] })] }), _jsxs("div", { className: "space-y-4", children: [_jsxs("div", { children: [_jsxs("div", { className: "flex justify-between mb-1", children: [_jsx("span", { className: "text-sm font-medium text-gray-700", children: "A Favor" }), _jsxs("span", { className: "text-sm font-medium text-gray-700", children: [((results.favor / totalVotes) * 100).toFixed(1), "%"] })] }), _jsx("div", { className: "w-full bg-gray-200 rounded-full h-2", children: _jsx("div", { className: "bg-green-500 h-2 rounded-full", style: { width: `${(results.favor / totalVotes) * 100}%` } }) })] }), _jsxs("div", { children: [_jsxs("div", { className: "flex justify-between mb-1", children: [_jsx("span", { className: "text-sm font-medium text-gray-700", children: "En Contra" }), _jsxs("span", { className: "text-sm font-medium text-gray-700", children: [((results.contra / totalVotes) * 100).toFixed(1), "%"] })] }), _jsx("div", { className: "w-full bg-gray-200 rounded-full h-2", children: _jsx("div", { className: "bg-red-500 h-2 rounded-full", style: { width: `${(results.contra / totalVotes) * 100}%` } }) })] }), _jsxs("div", { children: [_jsxs("div", { className: "flex justify-between mb-1", children: [_jsx("span", { className: "text-sm font-medium text-gray-700", children: "Abstenci\u00F3n" }), _jsxs("span", { className: "text-sm font-medium text-gray-700", children: [((results.abstencion / totalVotes) * 100).toFixed(1), "%"] })] }), _jsx("div", { className: "w-full bg-gray-200 rounded-full h-2", children: _jsx("div", { className: "bg-gray-500 h-2 rounded-full", style: { width: `${(results.abstencion / totalVotes) * 100}%` } }) })] })] })] }))] }));
};
export default VotingSystem;
